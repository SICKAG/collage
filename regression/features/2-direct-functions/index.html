<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script type="module">
    import { expose } from "@sick-davinci/collage";
    // import { expose, onLoaded } from "@sick-davinci/collage";

    function onClickAt(selector, fn) {
      document.addEventListener('click', e => {
        if (e.target.closest(selector)) {
          fn()
        }
      })
    }

    expose({}).then(({children: {harry}, services}) => {
    // expose({}).then(({fragments: {harry}, services}) => {

    //  onLoaded('harry', () => {
        console.log(harry.castSpell("foo"))
    //  });
      onClickAt('#btn-cast-spell', () => {
        console.log('???', harry)
        harry.castSpell(document.querySelector('[name=spell]').value)
      })
    })

  </script>
</head>
<body>
  <h1>Call functions directly on a child</h1>

  Lets say I embed a child and call it <code>harry</code>.

  <collage-fragment url="./function-child.html" name="harry"></collage-fragment>

  Then I should be able to call functions on Harry

  <nav>
    <input name="spell">
    <button id="btn-cast-spell">cast!</button>
  </nav>

</body>
</html>
